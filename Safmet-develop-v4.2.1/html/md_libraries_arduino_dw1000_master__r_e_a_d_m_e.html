<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Safmet: arduino-dw1000</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Safmet<span id="projectnumber">&#160;6dc5016ddf9bfd9b54768b44ce5313d4130e6c5c
(with uncommitted changes)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">arduino-dw1000 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >A library that offers functionality to use Decawave's DW1000 chips/modules with Arduino (see <a href="http://www.decawave.com/products/dwm1000-module">http://www.decawave.com/products/dwm1000-module</a>).</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Project state</h1>
<p ><b>Development:</b> There is no active development by the owner thotro. Anyway this library is still maintained, so make pull requests if you found a bug or developed a new feature!</p>
<p ><b>TODOs:</b></p><ul>
<li>Fill wiki: <a href="https://github.com/thotro/arduino-dw1000/wiki">https://github.com/thotro/arduino-dw1000/wiki</a></li>
<li>MAC and frame filtering, error handling</li>
<li>Sleep/power optimizations</li>
<li>Refactor <code><a class="el" href="class_d_w1000_mac.html">DW1000Mac</a></code></li>
<li>Refactor <code>DW1000Ranging</code></li>
<li>Refactor <code><a class="el" href="class_d_w1000_device.html">DW1000Device</a></code></li>
<li>Update examples (complete todos in header notice)</li>
</ul>
<p ><b>What can I do with this lib?:</b> Stable transmission of messages between two modules is possible. The code for device tuning is working as well, hence different modes of operation can be chosen. As frame filtering (i.e. via MAC conforming messages) is partially implemented yet, internal features of the chip for node addressing and auto-acknowledgement of messages can not be used. This is part of a future milestone. For now, if acknowledgements are required, they have to be sent manually and node addresses have to be encoded in the message payload and processed by the host controller.</p>
<p ><b>General notice:</b></p><ul>
<li>The documentation <a href="https://github.com/thotro/arduino-dw1000/tree/master/extras/doc">https://github.com/thotro/arduino-dw1000/tree/master/extras/doc</a> is manually generated and maybe out of date.</li>
<li>Datasheet and application notices are available at <a href="http://www.decawave.com/">http://www.decawave.com/</a> (require free registration).</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Installation</h1>
<p ><b>Requires c++11 support</b>, Arduino IDE &gt;= 1.6.6 support c++11.</p>
<ol type="1">
<li>Get a ZIP file of the master branch or the latest release and save somewhere on your machine.</li>
<li>Open your Arduino IDE and goto <em>Sketch</em> / <em>Include Library</em> / <em>Add .ZIP Library...</em></li>
<li>Select the downloaded ZIP file of the DW1000 library</li>
<li>You should now see the library in the list and have access to the examples in the dedicated section of the IDE</li>
</ol>
<p >Note that in version 1.6.6 of your Arduino IDE you can get the library via the Arduino library manager.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Contents</h1>
<ul>
<li><a href="../../wiki/Project-structure">Project structure</a></li>
<li><a href="../../wiki/Features">Features and design intentions</a></li>
<li><a href="../../wiki/Testbed-and-Adapter-board">Testbed and Adapter board</a></li>
<li><a href="../../wiki/Projects">Projects, Media, Links</a></li>
<li><a href="../../wiki/Benchmarks">Benchmarks</a></li>
<li>API docs<ul>
<li><a href="https://cdn.rawgit.com/thotro/arduino-dw1000/master/extras/doc/html/index.html">HTML</a></li>
<li><a href="https://cdn.rawgit.com/thotro/arduino-dw1000/master/extras/doc/DW1000_Arduino_API_doc.pdf">PDF</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Usage</h1>
<p >General usage of the DW1000 library is depicted below. Please see the Arduino test example codes (described in the <a href="../../wiki/Project-structure">project structure</a>) for more up-to-date and operational reference usage.</p>
<p >At the moment the library contains two types:</p><ul>
<li><b>DW1000:</b> State: stable. The statically accessible entity to work with your modules. Offers a variety of configuration options and manages module states and actions.</li>
<li><b><a class="el" href="class_d_w1000_time.html">DW1000Time</a>:</b> State: stable. Container entities that handle DW1000 specific timing values. These are required to allow accurate timestamps and time based computations; they aid in avoiding potential precision and capacity problems of standard number formats in Arduino and basically are wrapper objects for 64-bit signed integer data types; most importantly they take care of all bit-to-time-and-distance (and vice versa) conversions.</li>
<li><b>DW1000Ranging:</b> State: prototype. Contain all functions which allow to make the ranging protocole.</li>
<li><b><a class="el" href="class_d_w1000_device.html">DW1000Device</a>:</b> State: prototype. Contain all informations (long address, short ephemeral address, <a class="el" href="class_d_w1000_time.html">DW1000Time</a> of transition) about a distant device (anchor or tag) on the same network.</li>
<li><b><a class="el" href="class_d_w1000_mac.html">DW1000Mac</a>:</b> State: prototype. This class is a child of the <a class="el" href="class_d_w1000_device.html">DW1000Device</a> class and allow to generate the MAC frame for his <a class="el" href="class_d_w1000_device.html">DW1000Device</a> parent.</li>
</ul>
<div class="fragment"><div class="line">#include &lt;DW1000.h&gt;</div>
<div class="line">...</div>
<div class="line">// init with interrupt line and optionally with reset line</div>
<div class="line">DW1000.begin(irq_pin[, rst_pin]);</div>
<div class="line">// select a specific chip via a chip select line</div>
<div class="line">DW1000.select(cs_pin);</div>
<div class="line">// or use DW1000.reselect(cs_pin) to switch to previously selected chip</div>
<div class="line">...</div>
<div class="line">// open a device configuration sessions</div>
<div class="line">DW1000.newConfiguration();</div>
<div class="line">// configure specific aspects and/or choose defaults</div>
<div class="line">DW1000.setDefaults();</div>
<div class="line">DW1000.setDeviceAddress(5);</div>
<div class="line">DW1000.setNetworkId(10);</div>
<div class="line">// modes that define data rate, frequency, etc. (see API docs)</div>
<div class="line">DW1000.enableMode(DW1000.MODE_LONGDATA_RANGE_LOWPOWER);</div>
<div class="line">// ... and other stuff - finally upload to the module.</div>
<div class="line">DW1000.commitConfiguration();</div>
<div class="line">...</div>
<div class="line">// set some interrupt callback routines</div>
<div class="line">DW1000.attachSentHandler(some_handler_function);</div>
<div class="line">DW1000.attachReceivedHandler(another_handler_function);</div>
<div class="line">...</div>
<div class="line">// open a new transmit session</div>
<div class="line">DW1000.newTransmit();</div>
<div class="line">// configure specific aspects and/or choose defaults</div>
<div class="line">DW1000.setDefaults();</div>
<div class="line">DW1000.setData(some_data);</div>
<div class="line">DW1000Time delayTime = DW1000Time(100, DW1000Time::MILLISECONDS);</div>
<div class="line">[DW1000Time futureTimestamp = ]DW1000.setDelay(delayTime);</div>
<div class="line">// ... and other stuff - finally start the transmission</div>
<div class="line">DW1000.startTransmit();</div>
<div class="line">...</div>
<div class="line">// similar for a receiving session, like so ...</div>
<div class="line">DW1000.newReceive();</div>
<div class="line">DW1000.setDefaults();</div>
<div class="line">// so we don&#39;t need to restart the receiver manually each time</div>
<div class="line">DW1000.receivePermanently(true);</div>
<div class="line">// ... and other stuff - finally start awaiting messages</div>
<div class="line">DW1000.startReceive();</div>
<div class="line">...</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
